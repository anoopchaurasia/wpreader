fm.Package("com.reader.controller"),fm.Class("AddFeedSourceController","jfm.dom.Controller"),com.reader.controller.AddFeedSourceController=function(e,t,n){"use strict";function i(e){if($.trim(t.name.val())==="")return!1;e.preventDefault(),ReadFile.notify("loading"),t.name.blur();var n="/reader?method=getFeed&query_data=";return n=ReadFile.isPhone?"http://cloud.feedly.com/v3/search/feeds?n=15&q=":n,jQuery.get(n+t.name.val(),s).fail(function(e){ReadFile.notify("loading complete"),alert("Fail to load. Please check your internet connection.")}),!1}function s(e){if(e.results.length===0){t.info.show().text("No Result found!"),ReadFile.notify("loading complete");return}t.info.hide(),t.$results.clear(),t.$results.add(e.results),ReadFile.notify("loading complete")}this.setMe=function(e){t=e};var r;this.AddFeedSourceController=function(){r=location.hash.split("?")[1],r&&(r=r.match(/string=(.*?)&|string=(.*?)$/i),r=r&&(r[1]||r[2])),t.results=[]},this.onStart=function(e,t){t()},this.afterRender=function(){t.listcontainer.height(window.innerHeight-t.listcontainer.position().top-5),t.submit.click(i),r&&r.length>0&&(t.name.val(r),t.submit.click())},this.save=function(e){var t={website:e.website,url:e.feedId.replace("feed/",""),type:"Added",name:e.title,thumbnail:"http://www.google.com/s2/favicons?domain="+e.website,full:!0,inlist:"true"};FeedList.getInstance().add(t,function(){history.back()})},this.onStop=function(){t.name.blur()}};
fm.isMinified=true;
