fm.Package("jfm.hash"),fm.AbstractClass("HashChange"),jfm.hash.HashChange=function(e){function n(){var n=location.hash.substring(1),r=n.split("?");n=r[0],r=r[1];if(n===t)return;var i=!1,s=n.split("/"),o,u={};for(var a=0;a<e.route.length;a++){o=e.route[a].path.split("/");if(o.length==s.length){for(var f=0;f<o.length;f++){if(o[f]==s[f])continue;if(o[f].indexOf(":")==0){u[o[f].substring(1)]=s[f];continue}break}if(f==o.length){e.onUrlChange(e.route[a],u),i=!0;break}}}!i&&e.defaultRoute&&(location.hash=e.defaultRoute),t=n}function r(){$("[fm-controller]").each(function(){var e=fm.isExist(this.getAttribute("fm-controller")),t=""+e.getClass();e.setTemplate(this,t),new jfm.dom.DomManager($(this),new e)})}this.setMe=function(t){e=t};var t;this.activateCurrent=function(){n()};var i,s;this.onUrlChange=function(t,n){if(typeof t.view=="string")fm.Include(t.view),setTimeout(function(){t.view=fm.isExist(t.view),e.onUrlChange(t,n)},10);else{if(i&&t.view.toString()===i.toString()){i.onChange(n,s),s=n;return}i&&i.onStop();var r=new t.view(n);r.onStart(n),i=r}},this.HashChange=function(){this.route=[],this.defaultRoute="",window.onhashchange=n,r()}};
fm.isMinified=true;
